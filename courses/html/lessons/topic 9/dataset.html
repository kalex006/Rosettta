<header class="lesson-header">
    <h1 class="artifact-title">9.4 The Data-* Attribute API</h1>
    <p class="artifact-subtitle">Semantic Metadata: Embedding custom data-payloads within the Document Object Model.</p>
</header>

<section class="lesson-content">
    
    <div class="content-block">
        <h2>The Developer's Namespace</h2>
        <p>
            Standard HTML attributes like <code>id</code>, <code>class</code>, and <code>href</code> have predefined meanings for the browser engine. To store custom information that is specific to our application logic, we use the <strong>data-*</strong> attribute prefix.
        </p>
        <p>
            In the ROSETTA <strong>Zero-Backend</strong> architecture, <code>data-*</code> attributes are the "Database of the DOM." They allow us to store state, configuration, and metadata directly on the elements that need them, enabling our JavaScript to remain decoupled and highly efficient.
        </p>
    </div>

    <div class="content-block">
        <h2>1. Naming Conventions</h2>
        <p>
            An architect must follow strict naming rules to ensure the data is accessible:
        </p>
        <ul class="artifact-list">
            <li>Must begin with <code>data-</code>.</li>
            <li>Should only contain lowercase letters and hyphens (<code>-</code>).</li>
            <li><strong>Transformation:</strong> When accessed in JavaScript, hyphens are converted to <strong>camelCase</strong>. (e.g., <code>data-artifact-id</code> becomes <code>dataset.artifactId</code>).</li>
        </ul>
    </div>

    <div class="code-artifact">
        <div class="code-header">
            <span class="lang-tag">HTML</span>
            <span class="file-name">metadata_embedding.html</span>
        </div>
        <pre><code class="language-html">&lt;!-- Storing language and difficulty metadata on a card --&gt;
&lt;div class="artifact-card" 
     data-lang="rust" 
     data-difficulty="advanced" 
     data-last-sync="2026-02-01"&gt;
    &lt;h2&gt;Ownership & Borrowing&lt;/h2&gt;
&lt;/div&gt;</code></pre>
    </div>

    <div class="content-block">
        <h2>2. Accessing the dataset API</h2>
        <p>
            JavaScript provides a dedicated <code>dataset</code> property on every element. This property returns a <strong>DOMStringMap</strong> object containing all data attributes assigned to that element.
        </p>
    </div>

    <div class="code-artifact">
        <div class="code-header">
            <span class="lang-tag">JavaScript</span>
            <span class="file-name">data_extraction.js</span>
        </div>
        <pre><code class="language-javascript">const card = document.querySelector('.artifact-card');

// Reading data
console.log(card.dataset.lang); // "rust"
console.log(card.dataset.difficulty); // "advanced"

// Writing data (updates the DOM attribute automatically)
card.dataset.status = "completed"; </code></pre>
    </div>

    <div class="content-block">
        <h2>3. CSS Integration: Selecting & Displaying</h2>
        <p>
            Data attributes are first-class citizens in CSS. They can be used as selectors to apply specific styles based on state, and their values can even be displayed visually using the <code>content: attr()</code> property.
        </p>
    </div>

    <div class="code-artifact">
        <div class="code-header">
            <span class="lang-tag">CSS</span>
            <span class="file-name">artifact_logic.css</span>
        </div>
        <pre><code class="language-css">/* Select all cards marked as 'advanced' */
.artifact-card[data-difficulty="advanced"] {
    border-color: #d4af37; /* Ancient Gold border */
}

/* Display the difficulty level as a badge using CSS only */
.artifact-card::after {
    content: "Level: " attr(data-difficulty);
    font-size: 0.7rem;
    text-transform: uppercase;
}</code></pre>
    </div>

    <div class="content-block">
        <h2>4. Performance & The "Source of Truth"</h2>
        <p>
            As a Senior Architect, you must decide where your "Truth" lives. 
        </p>
        <ul class="artifact-list">
            <li><strong>Pros:</strong> Excellent for storing small, element-specific state (like `data-is-open="true"`). It makes the HTML self-documenting.</li>
            <li><strong>Cons:</strong> Reading and writing to the DOM is slower than reading and writing to a standard JavaScript Object. If you are processing thousands of data points, use a JS Map or Object instead of <code>dataset</code>.</li>
        </ul>
    </div>

    <div class="alert-box gold">
        <span class="alert-icon">⚡</span>
        <div class="alert-content">
            <strong>Architect's Use Case:</strong> In ROSETTA, we use <code>data-lesson-id</code> on our sidebar links. When a user clicks a link, our `main.js` grabs that ID from the <code>dataset</code> and uses it to fetch the correct <code>.html</code> file from the server.
        </div>
    </div>

    <div class="alert-box gold">
        <span class="alert-icon">⚠</span>
        <div class="alert-content">
            <strong>Security Warning:</strong> Data attributes are perfectly visible to anyone using "Inspect Element." Never store sensitive data like passwords, API keys, or private user info in <code>data-*</code> attributes.
        </div>
    </div>

</section>
